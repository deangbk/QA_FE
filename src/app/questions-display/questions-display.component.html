<div class="col-xl-12">
	<app-card cardTitle="Hover Table" [options]="false" blockClass="table-border-style">
		<div class="">
			<div class="row">
				<div class="col-md-3">
					<div class="form-group">
						<input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchText">
					</div>
				</div>
				<div class="col-md-3">
					<select class="form-control" [(ngModel)]="qfilter.has_answer">
						<option [ngValue]="null" selected>Select Answered Status</option>
						<option [ngValue]="true">Answered</option>
						<option [ngValue]="false">Not Answered</option>
					</select>
				</div>
				<div class="col-md-3">
					<select class="form-control" [(ngModel)]="filter2.category" (change)="updateFilter()">
						<option [ngValue]="'general'" selected>Filter by Category Type</option>
						<option [ngValue]="'general'">General</option>
						<option [ngValue]="'collateral'">Collateral</option>
						<option [ngValue]="'guarantor'">Guarantor</option>
						<option [ngValue]="'litigation'">Litigation</option>
						
					</select>
					
				</div>
				<div class="col-md-3">

					<ng-select [items]="accountList$ | async" [multiple]="true" bindLabel="login" bindValue="login" [clearable]="false" [(ngModel)]="accountList">
						<ng-template ng-label-tmp let-item="item" let-clear="clear">
						  <span class="ng-value-label"> {{ item }}</span>
						  <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span> 
						</ng-template>
			
						<ng-template ng-option-tmp let-item="item">
						   {{ item }}
						</ng-template>
					  </ng-select>
					<!-- <input type="text" class="form-control" placeholder="Account" [(ngModel)]="accountFilter"> -->
					<!-- <ng-select
				
					[items]="accountList$ | async"
					[multiple]="true"
					[closeOnSelect]="false"
					[clearable]="false"
					[searchable]="false"
					bindLabel="name"
					placeholder="Select Account"
					[(ngModel)]="accountList"
					
				  >
				  </ng-select> -->
					</div>
			</div>
			<table class="table table-hover">
				<thead>
					<tr>
						<th >#</th>
						<th >Account</th>
						<th >Date Posted</th>
						<th class="w-30">Questions</th>
						
						<th style="width:30%">Answer</th>
						<th >Date Answered</th>
						<th>docs</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let q of questions | search:searchText : accountList : qfilter.has_answer:  filter2; let indexOfelement=index;"    (click)="openMyModal('modal-16',q)" role="button">
						<td>{{q.q_num}}</td>
						<td>{{q.account.id}} - # {{indexOfelement}}</td>
						<td>{{q.date_post | date}}</td>
						<td >{{q.q_text}}</td>
					
						<td>{{q.a_text}}</td>
						<td>{{q.d}}</td>
						<td>
							<span *ngFor="let doc of q.attachments">
								<a href="/docs/pdf/{{doc.id}}" target="_blank">{{doc.name}}</a></span>
						</td>
					</tr>
				</tbody>
			</table>
			<ngb-pagination [collectionSize]="filteredQuestionsCount" [(page)]="page" [boundaryLinks]="true"  [pageSize]="3" />
		</div>
		<pre>Current page: {{ page }}</pre>
	</app-card>
</div>

<div class="col-md-6">
	<app-animation-modal [modalID]="'modal-16'" [modalClass]="'md-effect-16'">
		<ng-container *ngTemplateOutlet="modalContents"></ng-container>
	  </app-animation-modal>
    <!-- <app-card cardTitle="Advance" [options]="false">
      <div class="btn-page">
        <button
          data-pc-animate="fade-in-scale"
          type="button"
          class="btn btn-primary me-2"
          data-bs-toggle="modal"
          data-modal="modal-16"
          (click)="openMyModal('modal-16')"
        >
          Blur
        </button>
        <app-animation-modal [modalID]="'modal-16'" [modalClass]="'md-effect-16'">
          <ng-container *ngTemplateOutlet="modalContents"></ng-container>
        </app-animation-modal>
        <button
          data-pc-animate="fade-in-scale"
          type="button"
          class="btn btn-primary me-2"
          data-bs-toggle="modal"
          data-modal="modal-17"
          (click)="openMyModal('modal-17')"
        >
          Let Me In
        </button>
     <app-animation-modal [modalID]="'modal-17'" [modalClass]="'md-effect-17'">
          <ng-container *ngTemplateOutlet="modalContents"></ng-container>
        </app-animation-modal> 
        <button
          data-pc-animate="fade-in-scale"
          type="button"
          class="btn btn-primary me-2"
          data-bs-toggle="modal"
          data-modal="modal-18"
          (click)="openMyModal('modal-18')"
        >
          Make Way!
        </button>
       <app-animation-modal [modalID]="'modal-18'" [modalClass]="'md-effect-18'">
          <ng-container *ngTemplateOutlet="modalContents"></ng-container>
        </app-animation-modal>
        <button
          data-pc-animate="fade-in-scale"
          type="button"
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-modal="modal-19"
          (click)="openMyModal('modal-19')"
        >
          Slip from top
        </button>
         <app-animation-modal [modalID]="'modal-19'" [modalClass]="'md-effect-19'">
          <ng-container *ngTemplateOutlet="modalContents"></ng-container>
        </app-animation-modal> 
      </div>
    </app-card> -->

	<!-- <div class="col-sm-12">
		<app-card cardTitle="Advance Select" [options]="false">
		  <div class="row">
			<div class="col-sm-12 col-xl-12">
			  <h4 class="sub-title">Multi Select</h4>
			  <ng-select
				[items]="accountList$ | async"
				[multiple]="true"
				[closeOnSelect]="false"
				[clearable]="false"
				[searchable]="false"
				bindLabel="name"
				placeholder="Select people"
				[(ngModel)]="accountList"
			  >
			  </ng-select>
			</div>
			</div>
		</app-card>
		</div> -->

		<!-- <div class="col-sm-12 col-xl-4 m-b-30">
			<h4 class="sub-title">Custom selected item template</h4>
			<ng-select [items]="accountList$ | async" [multiple]="true" bindLabel="login" bindValue="login" [clearable]="false" [(ngModel)]="accountList2">
			  <ng-template ng-label-tmp let-item="item" >
				<span class="ng-value-label"> {{ item }}</span>
				 <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span> 
			  </ng-template>
  
			  <ng-template ng-option-tmp let-item="item">
				 {{ item }}
			  </ng-template>
			</ng-select>
		  </div> -->
{{filteredQuestionsCount}}
  </div>


  <ng-template #modalContents>
	<div class="modal-header bg-dark">
	  <h4 class="modal-title text-white"> Question Num: #{{singleQuestion.q_num}} - <span class="small">Last edited: {{singleQuestion.date_edit | date}} 
	<br> </span>
	</h4>
	  <p></p>
	  <button type=" button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
	</div>
	<div class="modal-body">
		<p>Account Number: {{singleQuestion.account.id}}</p>
		<p ><strong>Category:</strong> {{singleQuestion.category | uppercase}}</p>
	  <h4 class="text-black">Question  <span class="small">  - <i>Date Posted: {{singleQuestion.date_post | date}} </i></span></h4>
	  <p class="text-muted mb-4">{{singleQuestion.q_text}}</p>
	  <h4 class="text-black">Answer  <span class="small">  - <i>Date Answered: {{singleQuestion.date_a_approve | date}} </i></span></h4>
	  <p class="text-muted "> {{singleQuestion.a_text}}</p>

	  <h4 class="text-black">Documents</h4>
	  <div *ngFor="let doc of singleQuestion.attachments"><p>
		<a href="/docs/pdf/{{doc.id}}" target="_blank">{{doc.name}}</a></p></div>
	</div>
	<div class="modal-footer">
	  <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" (click)="closeMyModal($event)"> Close </button>
	  <button type="button" class="btn btn-primary shadow-2" (click)="closeMyModal($event)"> Save changes </button>
	</div>
  </ng-template>
